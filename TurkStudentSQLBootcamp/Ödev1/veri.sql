INSERT INTO kategoriler (kategori_adi) VALUES
('Film'), ('Doğa'), ('Sanat'), ('Müzik'), ('Soyut'), ('Spor'), ('Oyun'), ('Çizgi Roman'), ('Anime/Manga'), ('Tarih');
INSERT INTO posterler (kategori_id, poster_adi, poster_aciklamasi, poster_fiyati, stok_adedi, poster_resmi_url) VALUES
(1, 'The Shawshank Redemption Poster', 'Klasik film posteri', 19.99, 100, 'https://via.placeholder.com/300x450.png?text=Shawshank+Poster'),
(1, 'The Godfather Poster', 'Mafya filmi posteri', 24.99, 80, 'https://via.placeholder.com/300x450.png?text=Godfather+Poster'),
(2, 'Yosemite National Park Poster', 'Doğa manzarası', 14.99, 150, 'https://images.unsplash.com/photo-1518495973542-4542c06155c9?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'),
(2, 'Amazon Rainforest Poster', 'Yağmur ormanı posteri', 16.99, 120, 'https://images.unsplash.com/photo-1542665660-725755749713?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'),
(3, 'Mona Lisa Poster', 'Leonardo da Vinci tablosu', 29.99, 50, 'https://via.placeholder.com/300x400.png?text=Mona+Lisa+Poster'),
(3, 'The Starry Night Poster', 'Van Gogh tablosu', 27.99, 60, 'https://via.placeholder.com/300x400.png?text=Starry+Night+Poster'),
(4, 'The Beatles Abbey Road Poster', 'Müzik grubu posteri', 22.99, 90, 'https://via.placeholder.com/400x400.png?text=Abbey+Road+Poster'),
(4, 'Pink Floyd Dark Side Poster', 'Rock müzik posteri', 21.99, 110, 'https://via.placeholder.com/400x400.png?text=Dark+Side+Poster'),
(5, 'Composition VIII Poster', 'Wassily Kandinsky', 18.99, 75, 'https://via.placeholder.com/350x450.png?text=Composition+VIII+Poster'),
(5, 'Black Square Poster', 'Kazimir Malevich', 17.99, 85, 'https://via.placeholder.com/400x400.png?text=Black+Square+Poster'),
(6, 'Michael Jordan Poster', 'Basketbol posteri', 25.99, 95, 'https://via.placeholder.com/300x450.png?text=Jordan+Poster'),
(6, 'Lionel Messi Poster', 'Futbol posteri', 23.99, 105, 'https://via.placeholder.com/300x450.png?text=Messi+Poster'),
(7, 'The Legend of Zelda Poster', 'Video oyunu posteri', 20.99, 130, 'https://via.placeholder.com/300x400.png?text=Zelda+Poster'),
(7, 'Super Mario Bros. Poster', 'Video oyunu posteri', 19.99, 140, 'https://via.placeholder.com/300x400.png?text=Mario+Poster'),
(8, 'Spider-Man Poster', 'Çizgi roman posteri', 15.99, 160, 'https://via.placeholder.com/300x450.png?text=Spider-Man+Poster'),
(8, 'Batman Poster', 'Çizgi roman posteri', 16.99, 150, 'https://via.placeholder.com/300x450.png?text=Batman+Poster'),
(9, 'Attack on Titan Poster', 'Anime posteri', 17.99, 100, 'https://via.placeholder.com/300x450.png?text=Attack+on+Titan+Poster'),
(9, 'Spirited Away Poster', 'Anime filmi posteri', 18.99, 90, 'https://via.placeholder.com/300x450.png?text=Spirited+Away+Poster'),
(10, 'World War II Poster', 'Tarihi poster', 13.99, 80, 'https://via.placeholder.com/400x300.png?text=WWII+Poster'),
(10, 'Ancient Rome Poster', 'Antik Roma posteri', 12.99, 90, 'https://via.placeholder.com/400x300.png?text=Ancient+Rome+Poster'),
(1, 'Pulp Fiction Poster' , 'film posteri', 15.99, 100, 'https://via.placeholder.com/300x450.png?text=Pulp+Fiction+Poster'),
(1, 'Inception Poster' , 'film posteri', 17.99, 80, 'https://via.placeholder.com/300x450.png?text=Inception+Poster'),
(2, 'Grand Canyon Poster', 'Doğa Harikası', 15.99, 100, 'https://via.placeholder.com/300x450.png?text=Grand+Canyon+Poster'),
(2, 'Northern Lights Poster', 'Kuzey Işıkları Posteri', 12.99, 60, 'https://via.placeholder.com/300x450.png?text=Northern+Lights+Poster'),
(3, 'Water Lilies Poster', 'Claude Monet', 22.99, 40, 'https://via.placeholder.com/300x450.png?text=Water+Lilies+Poster'),
(3, 'The Scream Poster', 'Edvard Munch', 30.99, 50, 'https://via.placeholder.com/300x450.png?text=Scream+Poster'),
(4, 'Queen Poster', 'Rock Müzik', 31.99, 24, 'https://via.placeholder.com/300x450.png?text=Queen+Poster'),
(4, 'Nirvana Poster', 'Grunge Müzik', 25.99, 54, 'https://via.placeholder.com/300x450.png?text=Nirvana+Poster'),
(5, 'Yellow-Red-Blue Poster', 'Wassily Kandinsky', 18.99, 32, 'https://via.placeholder.com/300x450.png?text=Yellow-Red-Blue+Poster'),
(5, 'White on White Poster', 'Kazimir Malevich', 19.99, 45, 'https://via.placeholder.com/300x450.png?text=White+On+White+Poster'),
(6, 'Ronaldo Poster', 'Futbol', 22.99, 12, 'https://via.placeholder.com/300x450.png?text=Ronaldo+Poster'),
(6, 'Serena Williams Poster', 'Tenis', 26.99, 65, 'https://via.placeholder.com/300x450.png?text=Serena+Williams+Poster'),
(7, 'Minecraft Poster', 'Video Game', 32.99, 78, 'https://via.placeholder.com/300x450.png?text=Minecraft+Poster'),
(7, 'Fortnite Poster', 'Video Game', 12.99, 89, 'https://via.placeholder.com/300x450.png?text=Fortnite+Poster'),
(8, 'X-Men Poster', 'Çizgi Roman', 15.99, 34, 'https://via.placeholder.com/300x450.png?text=X-Men+Poster'),
(8, 'Wonder Woman Poster', 'Çizgi Roman', 14.99, 25, 'https://via.placeholder.com/300x450.png?text=Wonder+Woman+Poster'),
(9, 'My Hero Academia Poster', 'Anime/Manga', 22.99, 45, 'https://via.placeholder.com/300x450.png?text=My+Hero+Academia+Poster'),
(9, 'One Piece Poster', 'Manga', 26.99, 23, 'https://via.placeholder.com/300x450.png?text=One+Piece+Poster'),
(10, 'Statue of Liberty Poster', 'Tarihi Mekan', 42.99, 11, 'https://via.placeholder.com/300x450.png?text=Statue+of+Liberty+Poster'),
(10, 'Pyramids Poster', 'Tarihi Mekan', 14.99, 14, 'https://via.placeholder.com/300x450.png?text=Pyramids+Poster');
INSERT INTO musteriler (musteri_adi, musteri_soyadi, musteri_email, musteri_telefon, musteri_adresi) VALUES
('Ayşe', 'Yılmaz', 'ayse.yilmaz@example.com', '5551234567', 'İstanbul'),
('Mehmet', 'Demir', 'mehmet.demir@example.com', '5329876543', 'Ankara'),
('Zeynep', 'Kaya', 'zeynep.kaya@example.com', '5421112233', 'İzmir'),
('Ali', 'Can', 'ali.can@example.com', '5553334455', 'Bursa'),
('Fatma', 'Şahin', 'fatma.sahin@example.com', '5305556677', 'Adana'),
('Hasan', 'Yıldırım', 'hasan.yildirim@example.com', '5437778899', 'Gaziantep'),
('Elif', 'Öztürk', 'elif.ozturk@example.com', '5519990011', 'Antalya'),
('Murat', 'Arslan', 'murat.arslan@example.com', '5352223344', 'Konya'),
('Selin', 'Koç', 'selin.koc@example.com', '5464445566', 'Mersin'),
('Deniz', 'Aydın', 'deniz.aydin@example.com', '5536667788', 'Diyarbakır'),
('Burak', 'Yıldız', 'burak.yildiz@example.com', '5388889900', 'Samsun'),
('Ceren', 'Doğan', 'ceren.dogan@example.com', '5411234567', 'Kayseri'),
('Emre', 'Şen', 'emre.sen@example.com', '5523456789', 'Eskişehir'),
('Gizem', 'Aslan', 'gizem.aslan@example.com', '5335678901', 'Şanlıurfa'),
('Ozan', 'Çelik', 'ozan.celik@example.com', '5447890123', 'Malatya'),
('Pınar', 'Kurt', 'pinar.kurt@example.com', '5549012345', 'Trabzon'),
('Sercan', 'Taş', 'sercan.tas@example.com', '5391234567', 'Erzurum'),
('Tuğçe', 'Akın', 'tugce.akin@example.com', '5453456789', 'Van'),
('Umut', 'Kılıç', 'umut.kilic@example.com', '5505678901', 'Elazığ'),
('Yağmur', 'Yaman', 'yagmur.yaman@example.com', '5317890123', 'Manisa'),
('Ahmet', 'Yılmaz', 'ahmet.yilmaz@example.com', '5551112233', 'İstanbul'),
('Büşra', 'Demir', 'busra.demir@example.com', '5322223344', 'Ankara'),
('Cem', 'Kaya', 'cem.kaya@example.com', '5423334455', 'İzmir'),
('Derya', 'Can', 'derya.can@example.com', '5554445566', 'Bursa'),
('Eren', 'Şahin', 'eren.sahin@example.com', '5306667788', 'Adana'),
('Funda', 'Yıldırım', 'funda.yildirim@example.com', '5438889900', 'Gaziantep'),
('Gökhan', 'Öztürk', 'gokhan.ozturk@example.com', '5510001122', 'Antalya'),
('Hülya', 'Arslan', 'hulya.arslan@example.com', '5351112233', 'Konya'),
('İbrahim', 'Koç', 'ibrahim.koc@example.com', '5462223344', 'Mersin'),
('Jale', 'Aydın', 'jale.aydin@example.com', '5533334455', 'Diyarbakır'),
('Kemal', 'Yıldız', 'kemal.yildiz@example.com', '5384445566', 'Samsun'),
('Leyla', 'Doğan', 'leyla.dogan@example.com', '5415556677', 'Kayseri'),
('Metin', 'Şen', 'metin.sen@example.com', '5526667788', 'Eskişehir'),
('Nergis', 'Aslan', 'nergis.aslan@example.com', '5337778899', 'Şanlıurfa'),
('Orhan', 'Çelik', 'orhan.celik@example.com', '5448889900', 'Malatya'),
('Özlem', 'Kurt', 'ozlem.kurt@example.com', '5540001122', 'Trabzon'),
('Polat', 'Taş', 'polat.tas@example.com', '5391112233', 'Erzurum'),
('Reyhan', 'Akın', 'reyhan.akin@example.com', '5452223344', 'Van'),
('Serdar', 'Kılıç', 'serdar.kilic@example.com', '5503334455', 'Elazığ'),
('Tuba', 'Yaman', 'tuba.yaman@example.com', '5314445566', 'Manisa');
CREATE OR REPLACE FUNCTION rastgele_satis_olustur()
RETURNS VOID AS $$
DECLARE
    i INT;
    rastgele_musteri_id BIGINT;
    rastgele_poster_id BIGINT;
    rastgele_adet INT;
    rastgele_tarih TIMESTAMP;
BEGIN
    FOR i IN 1..80 LOOP  -- 80'den fazla satış kaydı oluşturalım.
        -- Rastgele musteri_id seç
        SELECT musteri_id INTO rastgele_musteri_id FROM musteriler ORDER BY random() LIMIT 1;

        -- Rastgele poster_id seç
        SELECT poster_id INTO rastgele_poster_id FROM posterler ORDER BY random() LIMIT 1;

        -- Rastgele adet seç (1 ile 5 arasında)
        rastgele_adet := floor(random() * 5) + 1;

        -- Rastgele tarih oluştur (son 1 yıl içinde)
        rastgele_tarih := NOW() - (random() * interval '365 days');

         -- Stok kontrolü ve güncelleme
        IF (SELECT stok_adedi FROM posterler WHERE poster_id = rastgele_poster_id) >= rastgele_adet THEN
              -- Satışı ekle
            INSERT INTO satislar (musteri_id, poster_id, satis_tarihi, satis_adedi, toplam_tutar) VALUES
            (rastgele_musteri_id, rastgele_poster_id, rastgele_tarih, rastgele_adet, (SELECT poster_fiyati FROM posterler WHERE poster_id = rastgele_poster_id) * rastgele_adet);

            -- Stoğu güncelle
            UPDATE posterler SET stok_adedi = stok_adedi - rastgele_adet WHERE poster_id = rastgele_poster_id;
        END IF;
    END LOOP;
END;
$$ LANGUAGE plpgsql;
SELECT rastgele_satis_olustur();